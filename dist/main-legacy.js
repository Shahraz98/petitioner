System.register([],(function(e,t){"use strict";return{execute:function(){class e{constructor(e){this.wrapper=e,this.wrapper&&(this.responseTitle=this.wrapper.querySelector(".petitioner__response > h3"),this.responseText=this.wrapper.querySelector(".petitioner__response > p"),this.formEl=this.wrapper.querySelector("form"),this.viewLetterBTN=this.wrapper.querySelector(".petitioner__btn--letter"),this.petitionerModal=this.wrapper.querySelector(".petitioner-modal"),this.modalClose=this.wrapper.querySelector(".petitioner-modal__close"),this.backdrop=this.wrapper.querySelector(".petitioner-modal__backdrop"),this.actionPath=this.formEl?.action??"",this.formEl.addEventListener("submit",this.handleFormSubmit),this.viewLetterBTN.addEventListener("click",(()=>{this.toggleModal(!0)})),this.backdrop.addEventListener("click",(()=>{this.toggleModal(!1)})),this.modalClose.addEventListener("click",(()=>{this.toggleModal(!1)})))}showResponseMSG(e="Something went wrong",t="Please try again",r=!1){this.wrapper.classList.add("petitioner--submitted"),this.responseTitle.innerText=e,this.responseText.innerText=t}toggleModal(e=!0){this.petitionerModal.classList[e?"add":"remove"]("petitioner-modal--visible")}handleFormSubmit=e=>{e.preventDefault(),this.wrapper.classList.add("petitioner--loading");const t=new FormData(this.formEl);fetch(this.actionPath,{method:"POST",body:t,credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}}).then((e=>e.json())).then((e=>{e.success?this.showResponseMSG("Thank you!",e.data):this.showResponseMSG("Could not submit the form.",e.data),this.wrapper.classList.remove("petitioner--loading"),this.formEl.reset()})).catch((e=>{console.error("Error:",e),alert("An unexpected error occurred. Please try again later."),this.wrapper.classList.remove("petitioner--loading"),this.formEl.reset()}))}}const t=document.querySelectorAll(".petitioner");for(const r of t)new e(r)}}}));
