var c=Object.defineProperty;var l=(i,e,r)=>e in i?c(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r;var s=(i,e,r)=>l(i,typeof e!="symbol"?e+"":e,r);function d(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}class p{constructor(e){s(this,"handleFormSubmit",e=>{e.preventDefault(),this.wrapper.classList.add("petitioner--loading");const r=new FormData(this.formEl);fetch(this.actionPath,{method:"POST",body:r,credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>t.json()).then(t=>{t.success?this.showResponseMSG("Thank you!",t.data):this.showResponseMSG("Could not submit the form.",t.data),this.wrapper.classList.remove("petitioner--loading"),this.formEl.reset()}).catch(t=>{console.error("Error:",t),alert("An unexpected error occurred. Please try again later."),this.wrapper.classList.remove("petitioner--loading"),this.formEl.reset()})});var r,t;this.wrapper=e,this.wrapper&&(this.responseTitle=this.wrapper.querySelector(".petitioner__response > h3"),this.responseText=this.wrapper.querySelector(".petitioner__response > p"),this.formEl=this.wrapper.querySelector("form"),this.viewLetterBTN=this.wrapper.querySelector(".petitioner__btn--letter"),this.petitionerModal=this.wrapper.querySelector(".petitioner-modal"),this.modalClose=this.wrapper.querySelector(".petitioner-modal__close"),this.backdrop=this.wrapper.querySelector(".petitioner-modal__backdrop"),this.actionPath=(t=(r=this.formEl)==null?void 0:r.action)!=null?t:"",this.formEl.addEventListener("submit",this.handleFormSubmit),this.viewLetterBTN.addEventListener("click",()=>{this.toggleModal(!0)}),this.backdrop.addEventListener("click",()=>{this.toggleModal(!1)}),this.modalClose.addEventListener("click",()=>{this.toggleModal(!1)}))}showResponseMSG(e="Something went wrong",r="Please try again",t=!1){this.wrapper.classList.add("petitioner--submitted"),this.responseTitle.innerText=e,this.responseText.innerText=r}toggleModal(e=!0){this.petitionerModal.classList[e?"add":"remove"]("petitioner-modal--visible")}}const a=document.querySelectorAll(".petitioner");typeof petitionerRecaptcha<"u"&&petitionerRecaptcha.siteKey?new MutationObserver((e,r)=>{typeof grecaptcha<"u"&&(r.disconnect(),a.forEach(t=>{const o=t.querySelector('[name="petitioner-g-recaptcha-response"]');t.addEventListener("focusin",function(){grecaptcha.ready(function(){grecaptcha.execute(petitionerRecaptcha.siteKey,{action:"submit"}).then(n=>{o&&(o.value=n)})})},{once:!0})}))}).observe(document.body,{childList:!0,subtree:!0}):console.error("petitioner - reCAPTCHA site key is missing or reCAPTCHA failed to load.");a.forEach(i=>{new p(i)});export{d as __vite_legacy_guard};
