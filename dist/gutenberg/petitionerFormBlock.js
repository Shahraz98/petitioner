(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,n=window.wp.i18n,o=window.wp.blockEditor,i=window.wp.serverSideRender;var r=e.n(i);const s=window.wp.data,d=window.wp.components,l=window.ReactJSXRuntime;(0,t.registerBlockType)("petitioner/form",{title:(0,n.__)("Petitioner Form","petitioner"),icon:"forms",category:"widgets",edit:function({attributes:e,setAttributes:t}){const{formId:n,newPetitionLink:i}=e,c=(0,o.useBlockProps)(),a=(0,s.useSelect)((e=>e("core").getEntityRecords("postType","petitioner-petition",{per_page:-1,_fields:"title,id"})),[])||[],p=[];a.forEach((e=>{let t=e.title.raw;t.length>40&&(t=t.substring(0,40)+"...");const n={label:t,value:e.id};p.push(n)}));const w=()=>a.length?n?(0,l.jsx)("div",{style:{pointerEvents:"none"},children:(0,l.jsx)(r(),{block:"petitioner/form",attributes:e})}):(0,l.jsxs)("div",{style:{padding:"24px",background:"#efefef"},children:[(0,l.jsxs)("p",{children:[" ",(0,l.jsx)("small",{children:"Petitioner form"})]}),(0,l.jsx)("p",{children:"Use the dropdown in the block settings to select your petiton."})]}):(0,l.jsxs)("div",{style:{padding:"24px",background:"#efefef"},children:[(0,l.jsxs)("p",{children:[" ",(0,l.jsx)("small",{children:"Petitioner form"})]}),(0,l.jsx)("p",{children:"Looks like you haven't added any forms yet!"}),(0,l.jsx)(d.Button,{variant:"secondary",href:i||"",children:"Create your first petition"})]});return(0,l.jsxs)("div",{...c,children:[(0,l.jsx)(o.InspectorControls,{children:(0,l.jsx)(d.PanelBody,{children:(0,l.jsx)(d.SelectControl,{label:"Selected Petition",value:n,options:p,onChange:e=>t({formId:e})})})}),(0,l.jsx)(w,{})]})},save:()=>null})})();