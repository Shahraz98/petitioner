function r(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}class n{constructor(){this.total=0,this.perPage=100,this.tableDiv=document.getElementById("petitioner_submissions"),this.entriesDiv=this.tableDiv.querySelector(".petitioner-admin__entries"),this.paginationDiv=this.tableDiv.querySelector(".petitioner-admin__pagination"),this.currentPage=1,this.formSettings={},this.handleFormSettings(),this.formSettings.formID&&(this.fetch_data(this.currentPage),this.paginationDiv.addEventListener("click",t=>{if(t.target.classList.contains("petitioner__paging-button")){t.preventDefault();const i=parseInt(t.target.dataset.page);this.fetch_data(i)}}))}handleFormSettings(){const t=this.tableDiv.dataset.petitionerSubmissions;this.formSettings=JSON.parse(t)}fetch_data(t){const i="".concat(ajaxurl,"?action=petitioner_fetch_submissions&page=").concat(t,"&form_id=").concat(this.formSettings.formID,"&per_page=").concat(this.perPage);console.log(i),fetch(i).then(e=>e.json()).then(e=>{const{success:a,data:s}=e;a&&(this.total=s.total,this.submissions=s.submissions,this.render_table())}).catch(e=>console.error("Error fetching data:",e))}render_table(){var i;const t=(i=this.submissions)==null?void 0:i.map(e=>"<tr>\n                        <td>".concat(e.name,"</td>\n                        <td>").concat(e.email,"</td>\n                    </tr>")).join("");this.entriesDiv.innerHTML="\n        <p>Total: ".concat(this.total,'</p>\n        <table class="wp-list-table widefat fixed striped table-view-list posts">\n            <thead>\n                <tr>\n                    <th>Name</th>\n                    <th>Email</th>\n                </tr>\n            </thead>\n            <tbody>\n                ').concat(t,"\n            </tbody>\n        </table>\n        ")}render_pagination(){const t=this.currentPage--,i=this.currentPage++;let e='<button class="petitioner__paging-button" data-page="'.concat(t!==0?t:1,'"><</button>');const a=Math.ceil(this.total/this.perPage);for(let s=1;s<=a;s++)e+='<button class="petitioner__paging-button '.concat(s===this.currentPage?"active":"",'" data-page="').concat(s,'">').concat(s,"</button>");e+='<button class="petitioner__paging-button" data-page="'.concat(i<=a?i:a,'">></button>'),this.paginationDiv.innerHTML=e}}new n;export{r as __vite_legacy_guard};
