function o(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}class s{constructor(){this.total=1,this.perPage=2,this.tableDiv=document.getElementById("petitioner_submissions"),this.entriesDiv=this.tableDiv.querySelector(".petitioner-admin__entries"),this.paginationDiv=this.tableDiv.querySelector(".petitioner-admin__pagination"),this.currentPage=1,this.formSettings={},this.handleFormSettings(),this.formSettings.formID&&(this.fetch_data(this.currentPage),this.paginationDiv.addEventListener("click",t=>{if(t.target.classList.contains("petitioner__paging-button")){t.preventDefault();const i=parseInt(t.target.dataset.page);this.fetch_data(i)}}))}handleFormSettings(){const t=this.tableDiv.dataset.petitionerSubmissions;this.formSettings=JSON.parse(t)}fetch_data(t){const i="".concat(ajaxurl,"?action=petitioner_fetch_submissions&page=").concat(t,"&form_id=").concat(this.formSettings.formID,"&per_page=").concat(this.perPage);console.log(i),fetch(i).then(e=>e.json()).then(e=>{const{success:a,data:n}=e;a&&(this.total=n.total,this.submissions=n.submissions,this.render_table(),this.render_pagination())}).catch(e=>console.error("Error fetching data:",e))}render_table(){var i;const t=(i=this.submissions)==null?void 0:i.map(e=>"<tr>\n                        <td>".concat(e.name,"</td>\n                        <td>").concat(e.email,"</td>\n                    </tr>")).join("");this.entriesDiv.innerHTML="\n        <p>Total: ".concat(this.total,'</p>\n        <table class="wp-list-table widefat fixed striped table-view-list posts">\n            <thead>\n                <tr>\n                    <th>Name</th>\n                    <th>Email</th>\n                </tr>\n            </thead>\n            <tbody>\n                ').concat(t,"\n            </tbody>\n        </table>\n        ")}render_pagination(){const t=this.currentPage--,i=this.currentPage++;let e='<button class="petitioner__paging-button" data-page="'.concat(t!==0?t:1,'"><</button>');const a=Math.ceil(this.total/this.perPage);for(let n=1;n<=a;n++)e+='<button class="petitioner__paging-button '.concat(n===this.currentPage?"active":"",'" data-page="').concat(n,'">').concat(n,"</button>");e+='<button class="petitioner__paging-button" data-page="'.concat(i<=a?i:a,'">></button>'),this.paginationDiv.innerHTML=e}}new s;export{o as __vite_legacy_guard};
